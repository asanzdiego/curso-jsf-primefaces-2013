<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="description" content="JSF" />
  <meta name="author" content="Adolfo Sanz De Diego" />
  <title>JSF</title>
  <style type="text/css">code{white-space: pre;}</style>
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #f8f8f8; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
pre, code { background-color: #f8f8f8; }
code > span.kw { color: #204a87; font-weight: bold; }
code > span.dt { color: #204a87; }
code > span.dv { color: #0000cf; }
code > span.bn { color: #0000cf; }
code > span.fl { color: #0000cf; }
code > span.ch { color: #4e9a06; }
code > span.st { color: #4e9a06; }
code > span.co { color: #8f5902; font-style: italic; }
code > span.ot { color: #8f5902; }
code > span.al { color: #ef2929; }
code > span.fu { color: #000000; }
code > span.er { font-weight: bold; }
  </style>
</head>
<body>
<header>
<h1 class="title">JSF</h1>
<h2 class="author">Adolfo Sanz De Diego</h2>
<h3 class="date">Junio 2013</h3>
</header>
<nav id="TOC">
<ul>
<li><a href="#acerca-de"><span class="toc-section-number">1</span> Acerca de</a><ul>
<li><a href="#pronoide"><span class="toc-section-number">1.1</span> Pronoide</a></li>
<li><a href="#autor"><span class="toc-section-number">1.2</span> Autor</a></li>
<li><a href="#licencia"><span class="toc-section-number">1.3</span> Licencia</a></li>
</ul></li>
<li><a href="#introducción"><span class="toc-section-number">2</span> Introducción</a><ul>
<li><a href="#objetivo"><span class="toc-section-number">2.1</span> Objetivo</a></li>
<li><a href="#características"><span class="toc-section-number">2.2</span> Características</a></li>
<li><a href="#novedades-jsf-2.0"><span class="toc-section-number">2.3</span> Novedades JSF 2.0</a></li>
<li><a href="#implementaciones"><span class="toc-section-number">2.4</span> Implementaciones</a></li>
<li><a href="#extensiones"><span class="toc-section-number">2.5</span> Extensiones</a></li>
<li><a href="#model-view-controller"><span class="toc-section-number">2.6</span> Model-View-Controller</a></li>
<li><a href="#arquitectura"><span class="toc-section-number">2.7</span> Arquitectura</a></li>
</ul></li>
<li><a href="#instalación"><span class="toc-section-number">3</span> Instalación</a><ul>
<li><a href="#mojarra-vs-myfaces"><span class="toc-section-number">3.1</span> Mojarra VS MyFaces</a></li>
<li><a href="#maven"><span class="toc-section-number">3.2</span> Maven</a></li>
<li><a href="#eclipse"><span class="toc-section-number">3.3</span> Eclipse</a></li>
<li><a href="#facesservlet-en-el-web.xml"><span class="toc-section-number">3.4</span> FacesServlet en el web.xml</a></li>
<li><a href="#propiedad-project_stage-del-web.xml"><span class="toc-section-number">3.5</span> Propiedad PROJECT_STAGE del web.xml</a></li>
<li><a href="#páginas-de-error"><span class="toc-section-number">3.6</span> Páginas de error</a></li>
</ul></li>
<li><a href="#managed-beans"><span class="toc-section-number">4</span> Managed Beans</a><ul>
<li><a href="#declaración"><span class="toc-section-number">4.1</span> Declaración</a></li>
<li><a href="#inicializar-propiedades"><span class="toc-section-number">4.2</span> Inicializar propiedades</a></li>
<li><a href="#inicializar-un-array-o-un-list"><span class="toc-section-number">4.3</span> Inicializar un array o un List</a></li>
<li><a href="#inicializar-un-map"><span class="toc-section-number">4.4</span> Inicializar un Map</a></li>
</ul></li>
<li><a href="#bean-scopes"><span class="toc-section-number">5</span> Bean Scopes</a><ul>
<li><a href="#definición"><span class="toc-section-number">5.1</span> Definición</a></li>
<li><a href="#application"><span class="toc-section-number">5.2</span> Application</a></li>
<li><a href="#session"><span class="toc-section-number">5.3</span> Session</a></li>
<li><a href="#view"><span class="toc-section-number">5.4</span> View</a></li>
<li><a href="#request"><span class="toc-section-number">5.5</span> Request</a></li>
<li><a href="#none"><span class="toc-section-number">5.6</span> None</a></li>
<li><a href="#custom"><span class="toc-section-number">5.7</span> Custom</a></li>
</ul></li>
<li><a href="#expression-language"><span class="toc-section-number">6</span> Expression Language</a><ul>
<li><a href="#acceder-a-las-propiedades"><span class="toc-section-number">6.1</span> Acceder a las propiedades</a></li>
<li><a href="#acceder-a-las-propiedades-desde-java"><span class="toc-section-number">6.2</span> Acceder a las propiedades desde Java</a></li>
<li><a href="#objectos-implícitos"><span class="toc-section-number">6.3</span> Objectos implícitos</a></li>
</ul></li>
<li><a href="#navegación"><span class="toc-section-number">7</span> Navegación</a><ul>
<li><a href="#navegación-implícita"><span class="toc-section-number">7.1</span> Navegación implícita</a></li>
<li><a href="#navegación-condicional"><span class="toc-section-number">7.2</span> Navegación condicional</a></li>
<li><a href="#peticiones-http-get"><span class="toc-section-number">7.3</span> Peticiones HTTP GET</a></li>
<li><a href="#forward-vs-redirect"><span class="toc-section-number">7.4</span> Forward VS Redirect</a></li>
<li><a href="#flash-scope"><span class="toc-section-number">7.5</span> Flash Scope</a></li>
</ul></li>
<li><a href="#tags-libraries"><span class="toc-section-number">8</span> Tags Libraries</a><ul>
<li><a href="#usos"><span class="toc-section-number">8.1</span> Usos</a></li>
<li><a href="#core-vistas"><span class="toc-section-number">8.2</span> Core: Vistas</a></li>
<li><a href="#core-listeners"><span class="toc-section-number">8.3</span> Core: Listeners</a></li>
<li><a href="#core-converters"><span class="toc-section-number">8.4</span> Core: Converters</a></li>
<li><a href="#core-validators"><span class="toc-section-number">8.5</span> Core: Validators</a></li>
<li><a href="#core-otros"><span class="toc-section-number">8.6</span> Core: Otros</a></li>
<li><a href="#html-componentes-de-entrada"><span class="toc-section-number">8.7</span> HTML: Componentes de entrada</a></li>
<li><a href="#html-componentes-de-salida"><span class="toc-section-number">8.8</span> HTML: Componentes de salida</a></li>
<li><a href="#html-componentes-de-acción"><span class="toc-section-number">8.9</span> HTML: Componentes de acción</a></li>
<li><a href="#html-componentes-de-selección"><span class="toc-section-number">8.10</span> HTML: Componentes de selección</a></li>
<li><a href="#html-componentes-de-agrupación"><span class="toc-section-number">8.11</span> HTML: Componentes de agrupación</a></li>
</ul></li>
<li><a href="#ciclo-de-vida"><span class="toc-section-number">9</span> Ciclo de vida</a><ul>
<li><a href="#una-petición"><span class="toc-section-number">9.1</span> Una petición</a></li>
<li><a href="#esquema"><span class="toc-section-number">9.2</span> Esquema</a></li>
<li><a href="#restore-view"><span class="toc-section-number">9.3</span> Restore View</a></li>
<li><a href="#apply-request-values"><span class="toc-section-number">9.4</span> Apply Request Values</a></li>
<li><a href="#process-validations"><span class="toc-section-number">9.5</span> Process Validations</a></li>
<li><a href="#update-model-values"><span class="toc-section-number">9.6</span> Update Model Values</a></li>
<li><a href="#invoke-application"><span class="toc-section-number">9.7</span> Invoke Application</a></li>
<li><a href="#render-response"><span class="toc-section-number">9.8</span> Render Response</a></li>
</ul></li>
<li><a href="#convertidores"><span class="toc-section-number">10</span> Convertidores</a><ul>
<li><a href="#descripción"><span class="toc-section-number">10.1</span> Descripción</a></li>
<li><a href="#convertidores-estándar"><span class="toc-section-number">10.2</span> Convertidores estándar</a></li>
<li><a href="#convertidor-datetime"><span class="toc-section-number">10.3</span> Convertidor DateTime</a></li>
<li><a href="#convertidor-de-número"><span class="toc-section-number">10.4</span> Convertidor de Número</a></li>
<li><a href="#convertidor-de-moneda"><span class="toc-section-number">10.5</span> Convertidor de Moneda</a></li>
<li><a href="#convertidores-personalizados"><span class="toc-section-number">10.6</span> Convertidores personalizados</a></li>
<li><a href="#registrar-el-convertidor"><span class="toc-section-number">10.7</span> Registrar el convertidor</a></li>
<li><a href="#ejemplo"><span class="toc-section-number">10.8</span> Ejemplo</a></li>
<li><a href="#convertidores-automáticos"><span class="toc-section-number">10.9</span> Convertidores automáticos</a></li>
</ul></li>
<li><a href="#validadores"><span class="toc-section-number">11</span> Validadores</a><ul>
<li><a href="#definición-1"><span class="toc-section-number">11.1</span> Definición</a></li>
<li><a href="#validadores-estándar"><span class="toc-section-number">11.2</span> Validadores estándar</a></li>
<li><a href="#validadores-personalizados"><span class="toc-section-number">11.3</span> Validadores personalizados</a></li>
<li><a href="#ejemplo-1"><span class="toc-section-number">11.4</span> Ejemplo</a></li>
<li><a href="#validador-en-managed-bean"><span class="toc-section-number">11.5</span> Validador en Managed Bean</a></li>
<li><a href="#validación-a-nivel-de-aplicación"><span class="toc-section-number">11.6</span> Validación a nivel de aplicación</a></li>
</ul></li>
<li><a href="#message-bundles"><span class="toc-section-number">12</span> Message Bundles</a><ul>
<li><a href="#definición-2"><span class="toc-section-number">12.1</span> Definición</a></li>
<li><a href="#creación"><span class="toc-section-number">12.2</span> Creación</a></li>
<li><a href="#instanciación"><span class="toc-section-number">12.3</span> Instanciación</a></li>
<li><a href="#paremetrización"><span class="toc-section-number">12.4</span> Paremetrización</a></li>
<li><a href="#internacionalización"><span class="toc-section-number">12.5</span> Internacionalización</a></li>
<li><a href="#definir-el-idioma"><span class="toc-section-number">12.6</span> Definir el idioma</a></li>
</ul></li>
<li><a href="#facelets"><span class="toc-section-number">13</span> Facelets</a><ul>
<li><a href="#esquema-1"><span class="toc-section-number">13.1</span> Esquema</a></li>
<li><a href="#opciones-web.xml"><span class="toc-section-number">13.2</span> Opciones web.xml</a></li>
<li><a href="#configuración-faces-config.xml"><span class="toc-section-number">13.3</span> Configuración faces-config.xml</a></li>
<li><a href="#tags"><span class="toc-section-number">13.4</span> Tags</a></li>
<li><a href="#definición-de-la-plantilla"><span class="toc-section-number">13.5</span> Definición de la Plantilla</a></li>
<li><a href="#inclusión-del-menú"><span class="toc-section-number">13.6</span> Inclusión del Menú</a></li>
<li><a href="#uso-de-la-plantilla"><span class="toc-section-number">13.7</span> Uso de la Plantilla</a></li>
</ul></li>
<li><a href="#composite-components"><span class="toc-section-number">14</span> Composite Components</a><ul>
<li><a href="#introducción-1"><span class="toc-section-number">14.1</span> Introducción</a></li>
<li><a href="#ejemplo-2"><span class="toc-section-number">14.2</span> Ejemplo</a></li>
<li><a href="#uso"><span class="toc-section-number">14.3</span> Uso</a></li>
</ul></li>
<li><a href="#custom-tags"><span class="toc-section-number">15</span> Custom Tags</a><ul>
<li><a href="#introducción-2"><span class="toc-section-number">15.1</span> Introducción</a></li>
<li><a href="#ejemplo-3"><span class="toc-section-number">15.2</span> Ejemplo</a></li>
<li><a href="#configuración"><span class="toc-section-number">15.3</span> Configuración</a></li>
<li><a href="#uso-1"><span class="toc-section-number">15.4</span> Uso</a></li>
<li><a href="#composite-components-vs-custom-tags"><span class="toc-section-number">15.5</span> Composite Components VS Custom Tags</a></li>
</ul></li>
</ul>
</nav>
<h1 id="acerca-de"><span class="header-section-number">1</span> Acerca de</h1>
<h2 id="pronoide"><span class="header-section-number">1.1</span> Pronoide</h2>
<div style="text-align:center">
<img src="../img/logo-pronoide.png" alt="Pronoide" />
</div>
<p>Pronoide consolida sus servicios de formación superando las <strong>22.000 horas impartidas</strong> en más de 500 cursos (Diciembre 2011)</p>
<p>En la vorágine de <strong>tecnologías y marcos de trabajo existentes</strong> <strong>para la plataforma Java</strong>, una empresa dedica demasiado esfuerzo en analizar, comparar y finalmente decidir cuáles son los pilares sobre los que construir sus proyectos.</p>
<p>Nuestros Servicios de Formación Java permiten ayudarle en esta tarea, transfiriéndoles nuestra <strong>experiencia real de más de 10 años</strong>.</p>
<h2 id="autor"><span class="header-section-number">1.2</span> Autor</h2>
<p><strong>Adolfo Sanz De Diego</strong></p>
<ul>
<li><p>Correo: <a href="mailto:asanzdiego@gmail.com">asanzdiego@gmail.com</a></p></li>
<li><p>Twitter: <span class="citation" data-cites="asanzdiego">[@asanzdiego]</span>(http://twitter.com/asanzdiego)</p></li>
<li><p>Linkedin: <a href="http://www.linkedin.com/in/asanzdiego">http://www.linkedin.com/in/asanzdiego</a></p></li>
<li><p>Blog: <a href="http://asanzdiego.blogspot.com.es">http://asanzdiego.blogspot.com.es</a></p></li>
</ul>
<h2 id="licencia"><span class="header-section-number">1.3</span> Licencia</h2>
<p><strong>Este obra está bajo una licencia:</strong></p>
<ul>
<li><a href="http://creativecommons.org/licenses/by-sa/3.0/es/">Creative Commons Reconocimiento-CompartirIgual 3.0</a></li>
</ul>
<p><strong>El código fuente de los programas están bajo una licencia:</strong></p>
<ul>
<li><a href="http://www.viti.es/gnu/licenses/gpl.html">GPL 3.0</a></li>
</ul>
<h1 id="introducción"><span class="header-section-number">2</span> Introducción</h1>
<h2 id="objetivo"><span class="header-section-number">2.1</span> Objetivo</h2>
<p>El objetivo de JSF es <strong>desarrollar aplicaciones web</strong> de forma parecida a como se construyen <strong>aplicaciones de escritorio</strong> con Swing, AWT, SWT.</p>
<p>JSF gestiona las acciones producidas por el usuario en su página HTML, las traduce a <strong>eventos que son enviados al servidor</strong>, y regenera la página original con los cambios provocados por dichas acciones.</p>
<h2 id="características"><span class="header-section-number">2.2</span> Características</h2>
<p>Representar componentes de interfaz de usuario y manejar su estado.</p>
<p>Manejar eventos.</p>
<p>Validar y convertir datos.</p>
<p>Definir la navegación entre páginas.</p>
<p>Soportar internacionalización.</p>
<p>Soportar AJAX.</p>
<p>Extender todas estas características.</p>
<h2 id="novedades-jsf-2.0"><span class="header-section-number">2.3</span> Novedades JSF 2.0</h2>
<p>Facelets (mecanismo de plantillas).</p>
<p>Soporte nativo Ajax.</p>
<p>Navegación implicita (convención sobre configuración).</p>
<p>Navegación condicional.</p>
<p>Uso intensivo de anotaciones.</p>
<p>Project Stage (etapa del proyecto: desarrollo, producción, etc.)</p>
<p>Mejora de la validación.</p>
<p>Mejora la gestión de errores.</p>
<p>Añadido ResourceBundles como bean.</p>
<p>Carga de recursos (imágenes, CSS, JavaScripts...)</p>
<p>Componentes compuestos</p>
<h2 id="implementaciones"><span class="header-section-number">2.4</span> Implementaciones</h2>
<ul>
  <li>
<strong><a href="http://javaserverfaces.java.net/">Mojarra</a></strong>, la implementación de referencia de Oracle<br /> <a href="http://javaserverfaces.java.net/"><img 
      src="../img/jsf-logo-mojarra.png" alt="Mojarra"></a>
</li>
  <li>
<strong><a href="http://myfaces.apache.org/">MyFaces</a></strong>, la implementación de referencia de Apache<br /> <a href="http://myfaces.apache.org/"><img 
      src="../img/jsf-logo-myfaces.png" alt="MyFaces"></a>
</li>
</ul>

<h2 id="extensiones"><span class="header-section-number">2.5</span> Extensiones</h2>
<p><a href="http://www.jboss.org/richfaces"><img src="../img/jsf-logo-richfaces.png" alt="RichFaces"></a> <a href="http://www.icesoft.org/projects/ICEfaces/overview.jsf"><img src="../img/jsf-logo-icefaces.png" alt="ICEfaces"></a> <a href="http://www.primefaces.org/"><img src="../img/jsf-logo-primefaces.png" alt="PrimeFaces"></a> <a href="http://www.openfaces.org/"><img src="../img/jsf-logo-openfaces.png" alt="OpenFaces"></a></p>
<h2 id="model-view-controller"><span class="header-section-number">2.6</span> Model-View-Controller</h2>
<div style="text-align:center">
<img src="../img/jsf-mvc.png" alt="JSF MVC" />
</div>
<h2 id="arquitectura"><span class="header-section-number">2.7</span> Arquitectura</h2>
<p>Clases Java:</p>
<ul>
<li>Componentes UI
<ul>
<li>estándares: botón, checkbox, label, etc.</li>
<li>personalizados: ya sean de librerías externas o propios.</li>
</ul></li>
<li><p>FacesServlet (Front Controler declarado en el web.xml)</p></li>
<li><p>Conversores de tipo</p></li>
<li><p>Validadores</p></li>
</ul>
<p>Tags Libraries:</p>
<ul>
<li><p>Estándares -&gt; <a href="http://horstmann.com/corejsf/jsf-tags.html">http://horstmann.com/corejsf/jsf-tags.html</a></p></li>
<li><p>Personalidadas.</p></li>
<li><p>Usadas en JSP y Facelets.</p></li>
</ul>
<p>Archivos de configuración (faces-config.xml):</p>
<ul>
<li><p>Define Managed Beans.</p></li>
<li><p>Define la navegación entre páginas.</p></li>
</ul>
<h1 id="instalación"><span class="header-section-number">3</span> Instalación</h1>
<h2 id="mojarra-vs-myfaces"><span class="header-section-number">3.1</span> Mojarra VS MyFaces</h2>
<p>Yo voy a usar <strong>MyFaces</strong>, ¿por qué? por, entre otras, estas <a href="http://lu4242.blogspot.com.es/2011/06/10-reason-why-choose-myfaces-core-as.html">10 razones</a></p>
<h2 id="maven"><span class="header-section-number">3.2</span> Maven</h2>
<p>Buscamos los archetypes de <a href="http://myfaces.apache.org">http://myfaces.apache.org</a>:</p>
<pre><code>mvn archetype:generate -DarchetypeCatalog=http://myfaces.apache.org</code></pre>
<p>Y seleccionamos:</p>
<pre><code>org.apache.myfaces.buildtools:myfaces-archetype-helloworld20
(Archetype to create a new webapp based on MyFaces 2.0)</code></pre>
<p>Y respondemos a las preguntas:</p>
<pre><code>Define value for property &#39;groupId&#39;: : com.company
Define value for property &#39;artifactId&#39;: : project-name
Define value for property &#39;version&#39;:  1.0-SNAPSHOT: :
Define value for property &#39;package&#39;:  com.company: : com.company.proyectname</code></pre>
<h2 id="eclipse"><span class="header-section-number">3.3</span> Eclipse</h2>
<p>Import...</p>
<pre><code>Existing Maven Projects</code></pre>
<p>Añadir dependencias al pom.xml</p>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;dependency&gt;</span>
    <span class="kw">&lt;groupId&gt;</span>org.apache.myfaces.core<span class="kw">&lt;/groupId&gt;</span>
    <span class="kw">&lt;artifactId&gt;</span>myfaces-api<span class="kw">&lt;/artifactId&gt;</span>
    <span class="kw">&lt;version&gt;</span>${jsf-myfaces.version}<span class="kw">&lt;/version&gt;</span>
    <span class="kw">&lt;scope&gt;</span>compile<span class="kw">&lt;/scope&gt;</span>
<span class="kw">&lt;/dependency&gt;</span>
<span class="kw">&lt;dependency&gt;</span>
    <span class="kw">&lt;groupId&gt;</span>org.apache.myfaces.core<span class="kw">&lt;/groupId&gt;</span>
    <span class="kw">&lt;artifactId&gt;</span>myfaces-impl<span class="kw">&lt;/artifactId&gt;</span>
    <span class="kw">&lt;version&gt;</span>${jsf-myfaces.version}<span class="kw">&lt;/version&gt;</span>
    <span class="kw">&lt;scope&gt;</span>runtime<span class="kw">&lt;/scope&gt;</span>
<span class="kw">&lt;/dependency&gt;</span></code></pre>
<p>Botón derecho en el proyecto &gt; Properties &gt; Project Facets</p>
<pre><code>Configuration: JavaServer Faces 2.1 Project</code></pre>
<p>Further configuration available</p>
<pre><code>Content directory: src/main/webapp</code></pre>
<p>Luego:</p>
<pre><code>Type: Disable Library Configuration</code></pre>
<p>Botón derecho en el proyecto &gt; Properties &gt; Deployment Assembly</p>
<pre><code>Add... &gt; Java Build Path Entries &gt; Maven Dependencies</code></pre>
<h2 id="facesservlet-en-el-web.xml"><span class="header-section-number">3.4</span> FacesServlet en el web.xml</h2>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="co">&lt;!-- Faces Servlet --&gt;</span>
<span class="kw">&lt;servlet&gt;</span>
    <span class="kw">&lt;servlet-name&gt;</span>Faces Servlet<span class="kw">&lt;/servlet-name&gt;</span>
    <span class="kw">&lt;servlet-class&gt;</span>javax.faces.webapp.FacesServlet<span class="kw">&lt;/servlet-class&gt;</span>
    <span class="kw">&lt;load-on-startup&gt;</span>1<span class="kw">&lt;/load-on-startup&gt;</span>
<span class="kw">&lt;/servlet&gt;</span>

<span class="co">&lt;!-- Faces Servlet Mapping --&gt;</span>
<span class="kw">&lt;servlet-mapping&gt;</span>
    <span class="kw">&lt;servlet-name&gt;</span>Faces Servlet<span class="kw">&lt;/servlet-name&gt;</span>
    <span class="kw">&lt;url-pattern&gt;</span>*.jsf<span class="kw">&lt;/url-pattern&gt;</span>
<span class="kw">&lt;/servlet-mapping&gt;</span>

<span class="co">&lt;!-- Welcome files --&gt;</span>
<span class="kw">&lt;welcome-file-list&gt;</span>
    <span class="kw">&lt;welcome-file&gt;</span>index.html<span class="kw">&lt;/welcome-file&gt;</span>
<span class="kw">&lt;/welcome-file-list&gt;</span></code></pre>
<h2 id="propiedad-project_stage-del-web.xml"><span class="header-section-number">3.5</span> Propiedad PROJECT_STAGE del web.xml</h2>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;context-param&gt;</span>
    <span class="kw">&lt;description&gt;</span>Project stage for the application (new in 2.0). Expects one of
        the following values: Development, Production, SystemTest, UnitTest
    <span class="kw">&lt;/description&gt;</span>
    <span class="kw">&lt;param-name&gt;</span>javax.faces.PROJECT_STAGE<span class="kw">&lt;/param-name&gt;</span>
    <span class="kw">&lt;param-value&gt;</span>Development<span class="kw">&lt;/param-value&gt;</span>
<span class="kw">&lt;/context-param&gt;</span></code></pre>
<p>Por ejemplo, en MyFaces, si está en modo &quot;Development&quot; usa un página de error con mucha información, pero si está en modo &quot;Production&quot; usa las páginas de error estándar (404.html, 500.html) que tengas definidas (ya se en servidor de aplicaciones o en la propia aplicación)</p>
<h2 id="páginas-de-error"><span class="header-section-number">3.6</span> Páginas de error</h2>
<p>Si quieres definir tus propias páginas de error para tu aplicación (y no usar las del servidor de aplicaciones) deberás indicarlo en el web.xml</p>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;error-page&gt;</span>
    <span class="kw">&lt;error-code&gt;</span>500<span class="kw">&lt;/error-code&gt;</span>
    <span class="kw">&lt;location&gt;</span>/500.html<span class="kw">&lt;/location&gt;</span>
<span class="kw">&lt;/error-page&gt;</span></code></pre>
<h1 id="managed-beans"><span class="header-section-number">4</span> Managed Beans</h1>
<h2 id="declaración"><span class="header-section-number">4.1</span> Declaración</h2>
<p>Un Managed Bean es simplemente un POJO, que en JSF mapea los datos de una página.</p>
<p>Se pueden configurar mediante <strong>anotaciones</strong> o en <strong>/WEB-INF/faces-config.xml</strong></p>
<pre class="sourceCode java"><code class="sourceCode java"><span class="fu">@ManagedBean</span>(name=<span class="st">&quot;holaBean&quot;</span>)
<span class="fu">@SessionScoped</span>
<span class="kw">public</span> <span class="kw">class</span> HolaBean <span class="kw">implements</span> Serializable {

  <span class="kw">private</span> String nombre;

  <span class="kw">public</span> <span class="fu">holaBean</span>() { }

  <span class="co">// getters y setters</span>
}</code></pre>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;managed-bean&gt;</span>
  <span class="kw">&lt;managed-bean-name&gt;</span>holaBean<span class="kw">&lt;/managed-bean-name&gt;</span>
  <span class="kw">&lt;managed-bean-class&gt;</span>mipaquete.HolaBean<span class="kw">&lt;/managed-bean-class&gt;</span>
  <span class="kw">&lt;managed-bean-scope&gt;</span>session<span class="kw">&lt;/managed-bean-&gt;</span>
<span class="kw">&lt;/managed-bean&gt;</span></code></pre>
<h2 id="inicializar-propiedades"><span class="header-section-number">4.2</span> Inicializar propiedades</h2>
<p>En &lt;value&gt; podemos hacer referencia a otro bean con expresiones del tipo #{otroBean.otraPropiedad}.</p>
<pre class="sourceCode java"><code class="sourceCode java"><span class="fu">@ManagedBean</span>
<span class="fu">@SessionScoped</span>
<span class="kw">public</span> <span class="kw">class</span> UserBean {
  <span class="fu">@ManagedProperty</span>(value=<span class="st">&quot;Ana&quot;</span>)
  <span class="kw">private</span> String name
  ...
}</code></pre>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;managed-bean&gt;</span>
  <span class="kw">&lt;managed-bean-name&gt;</span>userBean<span class="kw">&lt;/managed-bean-name&gt;</span>
  <span class="kw">&lt;managed-bean-class&gt;</span>com.examples.UserBean<span class="kw">&lt;/managed-bean-class&gt;</span>
  <span class="kw">&lt;managed-bean-scope&gt;</span>session<span class="kw">&lt;/managed-bean-scope&gt;</span>
  <span class="kw">&lt;managed-property&gt;</span>
    <span class="kw">&lt;property-name&gt;</span>name<span class="kw">&lt;/property-name&gt;</span>
    <span class="kw">&lt;value&gt;</span>Ana<span class="kw">&lt;/value&gt;</span>
  <span class="kw">&lt;/managed-property&gt;</span>
<span class="kw">&lt;/managed-bean&gt;</span></code></pre>
<h2 id="inicializar-un-array-o-un-list"><span class="header-section-number">4.3</span> Inicializar un array o un List</h2>
<p>Sólo desde faces-config.xml</p>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;managed-property&gt;</span>
  <span class="kw">&lt;property-name&gt;</span>numHabitaciones<span class="kw">&lt;/property-name&gt;</span>
  <span class="kw">&lt;list-entries&gt;</span>
    <span class="kw">&lt;value-class&gt;</span>java.lang.Integer<span class="kw">&lt;/value-class&gt;</span>
    <span class="kw">&lt;value&gt;</span>1<span class="kw">&lt;/value&gt;</span>
    <span class="kw">&lt;value&gt;</span>2<span class="kw">&lt;/value&gt;</span>
    <span class="kw">&lt;value&gt;</span>3<span class="kw">&lt;/value&gt;</span>
  <span class="kw">&lt;/list-entries&gt;</span>
<span class="kw">&lt;/managed-property&gt;</span></code></pre>
<p>Para acceder desde nuestra página JSF:</p>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;h:outputText</span><span class="ot"> value=</span><span class="st">&quot;#{userBean.numHabitaciones[2]}&quot;</span><span class="kw">/&gt;</span></code></pre>
<h2 id="inicializar-un-map"><span class="header-section-number">4.4</span> Inicializar un Map</h2>
<p>Sólo desde faces-config.xml</p>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;managed-property&gt;</span>
  <span class="kw">&lt;property-name&gt;</span>semaforo<span class="kw">&lt;/property-name&gt;</span>
  <span class="kw">&lt;map-entries&gt;</span>
    <span class="kw">&lt;map-entry&gt;</span>
      <span class="kw">&lt;key&gt;</span>Rojo<span class="kw">&lt;/key&gt;</span>
      <span class="kw">&lt;value&gt;</span>No puedes continuar<span class="kw">&lt;/value&gt;</span>
    <span class="kw">&lt;/map-entry&gt;</span>
    <span class="kw">&lt;map-entry&gt;</span>
      <span class="kw">&lt;key&gt;</span>Verde<span class="kw">&lt;/key&gt;</span>
      <span class="kw">&lt;value&gt;</span>Puedes continuar<span class="kw">&lt;/value&gt;</span>
    <span class="kw">&lt;/map-entry&gt;</span>
  <span class="kw">&lt;/map-entries&gt;</span>
<span class="kw">&lt;/managed-property&gt;</span></code></pre>
<p>Para acceder desde nuestra página JSF:</p>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;h:outputText</span><span class="ot"> value=</span><span class="st">&quot;#{userBean.semaforo[&#39;Verde&#39;]}&quot;</span><span class="kw">/&gt;</span></code></pre>
<h1 id="bean-scopes"><span class="header-section-number">5</span> Bean Scopes</h1>
<h2 id="definición"><span class="header-section-number">5.1</span> Definición</h2>
<p>Un scope es un <strong>mapeo entre nombres y objetos</strong> que se almacena durante un determinado periodo de tiempo.</p>
<p>Se recomienda <strong>utilizar siempre el menor scope que necesite el bean</strong>, para evitar así posibles problemas de memoria.</p>
<p>Si declaramos el bean desde el fichero faces-config.xml</p>
<pre><code>&lt;managed-bean-scope&gt;application|session|view|request|none|custom&lt;/managed-bean-scope&gt;</code></pre>
<p>Si queremos hacerlo con anotaciones:</p>
<pre class="sourceCode java"><code class="sourceCode java">@{Application|Session|View|Request|None|Custom}Scoped</code></pre>
<h2 id="application"><span class="header-section-number">5.2</span> Application</h2>
<p>Con este scope, se guarda la información durante <strong>toda la vida de la aplicación web</strong>, independientemente de todas las peticiones y sesiones que se realicen.</p>
<p>Este bean se instancia con la primera petición a la aplicación y desaparece cuando la aplicación web se elimina del servidor.</p>
<p>Si queremos que el bean se instancie antes de que se muestre la primera página de la aplicación, usamos la propiedad eager a true.</p>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;managed-bean</span><span class="ot"> eager=</span><span class="st">&quot;true&quot;</span><span class="kw">&gt;</span></code></pre>
<pre class="sourceCode java"><code class="sourceCode java"><span class="fu">@ManagedBean</span>(eager=<span class="kw">true</span>)</code></pre>
<h2 id="session"><span class="header-section-number">5.3</span> Session</h2>
<p>Este scope guarda la información <strong>desde que el usuario comienza una sesión</strong> <strong>hasta que ésta termina</strong> (porque el tiempo expiró o se invocó al método invalidate sobre un objeto HttpSession).</p>
<p>HTTP es un protocolo sin estado, y por tanto, una vez que se envía una petición al servidor y éste responde, no se guarda ninguna información sobre esta transición.</p>
<p>Esto no es siempre adecuado en aplicaciones de lado de servidor, ya que es normal que necesiten ir guardando el estado.</p>
<p>Para ello, podemos utilizar:</p>
<ul>
<li><p><strong>Cookies</strong>: pares nombre-valor que el servidor envía al usuario, confiando en que en posteriores peticiones se la vaya &quot;devolviendo&quot;.</p></li>
<li><p><strong>URL rewriting</strong>: añade un identificador de sesión a la URL, y la sesión se guarda en el servidor.</p></li>
</ul>
<h2 id="view"><span class="header-section-number">5.4</span> View</h2>
<p>Este scope <strong>dura desde que se muestra una página JSF al usuario</strong> <strong>hasta que el usuario navega hacia otra página</strong>.</p>
<p>Es muy útil para páginas que usan <strong>AJAX</strong>.</p>
<h2 id="request"><span class="header-section-number">5.5</span> Request</h2>
<p>Este scope dura lo que <strong>dura una petición request</strong>.</p>
<p>Comienza cuando se envía una petición al servidor y termina cuando se devuelve la respuesta al usuario.</p>
<p>Esto hace que se cree una instancia del bean asociado para cada petición.</p>
<p>Los mensajes de estado y de error que se muestran al usuario son buenos candidatos a ser request, ya que se muestran una vez que el servidor devuelve la respuesta.</p>
<h2 id="none"><span class="header-section-number">5.6</span> None</h2>
<p>Los beans se instancian cuando son necesitados por otros beans, y se eliminan cuando esta necesidad desaparece.</p>
<h2 id="custom"><span class="header-section-number">5.7</span> Custom</h2>
<p>También se permite crear scopes personalizados donde el tiempo que dura lo definimos nosotros.</p>
<p>La aplicación se vuelve responsable de ir eliminando las instancias de los beans del mapeo.</p>
<h1 id="expression-language"><span class="header-section-number">6</span> Expression Language</h1>
<h2 id="acceder-a-las-propiedades"><span class="header-section-number">6.1</span> Acceder a las propiedades</h2>
<p>Expression Language (EL) <strong>nos permite acceder a las propiedades y a los métodos</strong> de los beans.</p>
<pre class="sourceCode XML"><code class="sourceCode xml"><span class="kw">&lt;h:outputText</span><span class="ot"> value=</span><span class="st">&quot;#{userBean.profile}&quot;</span><span class="kw">/&gt;</span></code></pre>
<p>Podemos <strong>utilizar operadores</strong> aritméticos, lógicos o comprobar si el valor es empty.</p>
<pre class="sourceCode XML"><code class="sourceCode xml"><span class="kw">&lt;h:outputText</span><span class="ot"> rendered=</span><span class="st">&quot;#{userBean.profile==&#39;VIP&#39;}&quot;</span><span class="ot"> value=</span><span class="st">&quot;Bono regalo de #{bono.base-10} Euros&quot;</span><span class="kw">/&gt;</span></code></pre>
<p>Podemos <strong>invocar a métodos con parámetros</strong>, siempre que no estén sobrecargados.</p>
<pre class="sourceCode XML"><code class="sourceCode xml"><span class="kw">&lt;h:commandButton</span><span class="ot"> value=</span><span class="st">&quot;Aceptar&quot;</span><span class="ot"> action=</span><span class="st">&quot;#{userBean.addText(&#39;texto&#39;)}&quot;</span><span class="kw">/&gt;</span></code></pre>
<h2 id="acceder-a-las-propiedades-desde-java"><span class="header-section-number">6.2</span> Acceder a las propiedades desde Java</h2>
<pre class="sourceCode java"><code class="sourceCode java">FacesContext ctx = FacesContext.<span class="fu">getCurrentInstance</span>();
Application app = ctx.<span class="fu">getApplication</span>( );</code></pre>
<pre class="sourceCode java"><code class="sourceCode java">ELContext ec = ctx.<span class="fu">getELContext</span>( );
String name = (String) app.<span class="fu">evaluateValueExpressionGet</span>(ctx,<span class="st">&quot;#{userBean.name}&quot;</span>,String.<span class="fu">class</span>);</code></pre>
<pre class="sourceCode java"><code class="sourceCode java">ExpressionFactory ef = app.<span class="fu">getExpressionFactory</span>( );
ValueExpression ve =.<span class="fu">ef</span>.<span class="fu">createValueExpression</span>(ec,<span class="st">&quot;#{userBean.name}&quot;</span>,String.<span class="fu">class</span>);
name = (String) ve.<span class="fu">getValue</span>(ec);
ve.<span class="fu">setValue</span>(ec, <span class="st">&quot;Serena&quot;</span>);</code></pre>
<pre class="sourceCode java"><code class="sourceCode java">ExpressionFactory ef = app.<span class="fu">getExpressionFactory</span>( );
ValueExpression ve = ef.<span class="fu">createValueExpression</span>(ec,<span class="st">&quot;#{userBean}&quot;</span>,UserBean.<span class="fu">class</span>);
UserBean ub = (UserBean) ve.<span class="fu">getValue</span>(ec);
ub.<span class="fu">setName</span>(<span class="st">&quot;Serena&quot;</span>);</code></pre>
<h2 id="objectos-implícitos"><span class="header-section-number">6.3</span> Objectos implícitos</h2>
<p>Son unos objetos que ya vienen predefinidos:</p>
<ul>
<li><p><strong>#{application}</strong>: el ServletContext.</p></li>
<li><p><strong>#{facesContext}</strong>: el FacesContext actual.</p></li>
<li><p><strong>#{session}</strong>: el HttpSession actual.</p></li>
<li><p><strong>#{request}</strong>: el HttpServletRequest actual.</p></li>
<li><p><strong>#{view}</strong>: el UIViewRoot actual.</p></li>
<li><p><strong>#{component}</strong>: el UIComponent actual.</p></li>
<li><p><strong>#{flash}</strong>: el Flash, que es un Map.</p></li>
</ul>
<p>Son unos objetos que ya vienen predefinidos:</p>
<ul>
<li><p><strong>#{applicationScope}</strong>: un map con los atributos del scope aplication actual.</p></li>
<li><p><strong>#{sessionScope}</strong>: un map con los atributos de la session actual.</p></li>
<li><p><strong>#{requestScope}</strong>: un map con los atributos de la request actual.</p></li>
<li><p><strong>#{viewScope}</strong>: un map con los atributos de la view actual.</p></li>
<li><p><strong>#{initParam}</strong>: un map con los parámetros del context actual.</p></li>
<li><p><strong>#{param}</strong>: un map con los parámetros de la request actual.</p></li>
<li><p><strong>#{paramValues}</strong>: un map con los valores de los parámetros de la request actual.</p></li>
<li><p><strong>#{header}</strong>: un map con la cabecera de la request actual.</p></li>
<li><p><strong>#{headerValues}</strong>: un map con los valores de la cabecera de la request actual.</p></li>
<li><p><strong>#{cookie}</strong>: un map con los atributos de la cookie.</p></li>
</ul>
<h1 id="navegación"><span class="header-section-number">7</span> Navegación</h1>
<h2 id="navegación-implícita"><span class="header-section-number">7.1</span> Navegación implícita</h2>
<p><strong>Convención sobre configuración</strong> -&gt; no requiere faces-config.xml.</p>
<p>Si queremos navegar desde question1.xhtml a question2.xhtml, en un link:</p>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;h:commandLink</span><span class="ot"> value=</span><span class="st">&quot;Next&quot;</span><span class="ot"> action=</span><span class="st">&quot;question2&quot;</span><span class="kw">/&gt;</span></code></pre>
<p>Si queremos elegir la página en tiempo de ejecución, asociamos el action a un método que nos devuelva el String que indicará la siguiente página a mostrar.</p>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;h:commandButton</span><span class="ot"> label=</span><span class="st">&quot;Aceptar&quot;</span><span class="ot"> action</span><span class="er">&quot;#{userBean.login}&quot;/&gt;</span></code></pre>
<pre class="sourceCode java"><code class="sourceCode java"><span class="kw">public</span> String <span class="fu">login</span>() {
  <span class="kw">return</span> <span class="st">&quot;login&quot;</span>;
}</code></pre>
<h2 id="navegación-condicional"><span class="header-section-number">7.2</span> Navegación condicional</h2>
<p>Podemos decidir distintas páginas:</p>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;h:commandButton</span><span class="ot"> label=</span><span class="st">&quot;Aceptar&quot;</span><span class="ot"> action</span><span class="er">&quot;#{userBean.login}&quot;/&gt;</span></code></pre>
<pre class="sourceCode java"><code class="sourceCode java"><span class="kw">public</span> String <span class="fu">login</span>() {
  <span class="kw">if</span> (succes) {
    <span class="kw">return</span> <span class="st">&quot;login&quot;</span>
  } <span class="kw">else</span> {
    <span class="kw">return</span> <span class="st">&quot;error&quot;</span>;
  }
}</code></pre>
<h2 id="peticiones-http-get"><span class="header-section-number">7.3</span> Peticiones HTTP GET</h2>
<p>Usar los componentes <strong>&lt;h:button&gt;</strong> y <strong>&lt;h:link&gt;</strong> en vez de &lt;h:commandButton&gt; y &lt;h:commandLink&gt;</p>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;h:link</span><span class="ot"> value=</span><span class="st">&quot;Aceptar&quot;</span><span class="ot"> outcome=</span><span class="st">&quot;login?myname=Ana&quot;</span><span class="kw">/&gt;</span></code></pre>
<p>Si queremos recoger los parámetros y asociarlos a un Bean, añadiremos al principio:</p>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;f:metadata&gt;</span>
  <span class="kw">&lt;f:viewParam</span><span class="ot"> name=</span><span class="st">&quot;myname&quot;</span><span class="ot"> value=</span><span class="st">&quot;#{userBean.name}&quot;</span><span class="kw">/&gt;</span>
<span class="kw">&lt;/f:metadata&gt;</span>
...</code></pre>
<p>Si queremos incluir todos los parámetros definidos en la página JSF:</p>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;h:button</span><span class="ot"> value=</span><span class="st">&quot;Aceptar&quot;</span><span class="ot"> outcome=</span><span class="st">&quot;login?includeViewParams=true&quot;</span><span class="kw">/&gt;</span></code></pre>
<h2 id="forward-vs-redirect"><span class="header-section-number">7.4</span> Forward VS Redirect</h2>
<p>Cuando desde una página pinchamos sobre un enlace o un botón para ir a otra página, <strong>por defecto, JSF hace un forward</strong>.</p>
<p>La ventaja es que no perdemos la request, pero como desventaja no se actualiza la URL del navegador (eso es a veces confuso para los usuarios, y malo para los bookmarks y el SEO)</p>
<p>Podemos <strong>obligar a que JSF haga un redirect</strong>, aunque esto implique perder la request original, y por ende forzar a que si queremos utilizar un Managed Bean este tiene tener un SessionScope.</p>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;h:commandButton</span><span class="ot"> label=</span><span class="st">&quot;Aceptar&quot;</span><span class="ot"> action=</span><span class="st">&quot;login?faces-redirect=true&quot;</span><span class="kw">/&gt;</span></code></pre>
<pre class="sourceCode java"><code class="sourceCode java"><span class="kw">public</span> String <span class="fu">login</span>() {
  <span class="kw">return</span> <span class="st">&quot;login?faces-redirect=true&quot;</span>;
}</code></pre>
<h2 id="flash-scope"><span class="header-section-number">7.5</span> Flash Scope</h2>
<p>Para poder tener el Managed Bean en un redirect, podemos utilizar el objeto <strong>flash</strong> que guarda datos entre la request actual y la siguiente request.</p>
<p>Para guardarlo:</p>
<pre class="sourceCode java"><code class="sourceCode java"><span class="kw">public</span> String <span class="fu">login</span>() {
  Flash flash = FacesContext.<span class="fu">getCurrentInstance</span>().<span class="fu">getExternalContext</span>().<span class="fu">getFlash</span>();
  flash.<span class="fu">put</span>(<span class="st">&quot;bean&quot;</span>, <span class="kw">this</span>);
  <span class="kw">return</span> <span class="st">&quot;login?faces-redirect=true&quot;</span>;
}</code></pre>
<p>Para recuperarlo:</p>
<pre class="sourceCode xml"><code class="sourceCode xml">#{flash.bean.propertyName}</code></pre>
<h1 id="tags-libraries"><span class="header-section-number">8</span> Tags Libraries</h1>
<h2 id="usos"><span class="header-section-number">8.1</span> Usos</h2>
<p>Las páginas JSF se construyen con librerías de etiquetas y con el <strong>lenguaje de expresiones</strong> EL (ej: #{miBean.miPropiedad})</p>
<p>Las librerías de etiquetas con <strong>sus atributos permiten personalizar</strong> <strong>el aspecto y el comportamiento</strong> de cada componente.</p>
<p>Las librerías de etiquetas estándar son:</p>
<ul>
<li><p>las <strong>core tags libraries</strong>: definen vistas, listeners, converters, validators, etc.</p></li>
<li><p>las <strong>html tags libraries</strong>: definen componentes de entrada, de salida, de acción, de selección, de agrupación</p></li>
</ul>
<h2 id="core-vistas"><span class="header-section-number">8.2</span> Core: Vistas</h2>
<p><strong>&lt;f:view/&gt;</strong>: Crea una vista principal.</p>
<p><strong>&lt;f:subview/&gt;</strong>: Crea una vista secundaria.</p>
<p><strong>&lt;f:facet/&gt;</strong>: Añade un facet a un componente.</p>
<h2 id="core-listeners"><span class="header-section-number">8.3</span> Core: Listeners</h2>
<p><strong>&lt;f:actionListener/&gt;</strong>: Añade un ActionListener a un componente.</p>
<p><strong>&lt;f:valueChangeListener/&gt;</strong>: Añade un ValueChangeListener a un componente.</p>
<p><strong>&lt;f:setPropertyChangeListener/&gt;</strong>: Añade un ActionListener a un componente que establece una propiedad de un bean a un valor dado.</p>
<h2 id="core-converters"><span class="header-section-number">8.4</span> Core: Converters</h2>
<p><strong>&lt;f:converter/&gt;</strong>: Añade un Converter a un componente.</p>
<p><strong>&lt;f:convertDateTime/&gt;</strong>: Añade un DateTimeConverter a un componente.</p>
<p><strong>&lt;f:convertNumber/&gt;</strong>: Añade un NumberConverter a un componente.</p>
<h2 id="core-validators"><span class="header-section-number">8.5</span> Core: Validators</h2>
<p><strong>&lt;f:validator/&gt;</strong>: Añade un Validator a un componente.</p>
<p><strong>&lt;f:validateDoubleRange/&gt;</strong>: Valida que el valor de un componente esté dentro de un rango de valores de tipo double.</p>
<p><strong>&lt;f:validateLength/&gt;</strong>: Valida la longitud del texto de un componente.</p>
<p><strong>&lt;f:validateLongRange/&gt;</strong>: Valida que el valor de un componente esté dentro de un rango de valores de tipo long.</p>
<h2 id="core-otros"><span class="header-section-number">8.6</span> Core: Otros</h2>
<p><strong>&lt;f:attribute/&gt;</strong>: Añade un atributo (clave/valor) a un componente.</p>
<p><strong>&lt;f:param/&gt;</strong>: Añade un parámetro a un componente.</p>
<p><strong>&lt;f:loadBundle/&gt;</strong>: Carga un ResourceBundle y guarda las propiedades como un Map.</p>
<p><strong>&lt;f:selectitems/&gt;</strong>: Specifica los items selcionados de un select.</p>
<p><strong>&lt;f:selectitem/&gt;</strong>: Specifica el item selcionado de un select.</p>
<p><strong>&lt;f:verbatim/&gt;</strong>: Añade etiquetas HTML dentro de una página JSF.</p>
<h2 id="html-componentes-de-entrada"><span class="header-section-number">8.7</span> HTML: Componentes de entrada</h2>
<p><strong>&lt;h:inputText/&gt;</strong>: Simple linea de texto de entrada.</p>
<p><strong>&lt;h:inputTextarea/&gt;</strong>: Múltiples lineas de texto de entrada.</p>
<p><strong>&lt;h:inputSecret/&gt;</strong>: Contraseña de entrada.</p>
<p><strong>&lt;h:inputHidden/&gt;</strong>: Campo oculto.</p>
<h2 id="html-componentes-de-salida"><span class="header-section-number">8.8</span> HTML: Componentes de salida</h2>
<p><strong>&lt;h:outputLabel/&gt;</strong>: Etiqueta para otro componente.</p>
<p><strong>&lt;h:outputLink/&gt;</strong>: Enlace HTML.</p>
<p><strong>&lt;h:outputFormat/&gt;</strong>: Formatea un texto de salida.</p>
<p><strong>&lt;h:outputText/&gt;</strong>: Simple linea de texto de salida.</p>
<p><strong>&lt;h:outputStylesheet/&gt;</strong>: Import de un CSS.</p>
<p><strong>&lt;h:outputScript/&gt;</strong>: Import de un JavaSript.</p>
<p><strong>&lt;h:graphicImage/&gt;</strong>: Muestra una imagen.</p>
<p><strong>&lt;h:message/&gt;</strong>: Muestra el mensaje más reciente para un componente.</p>
<p><strong>&lt;h:messages/&gt;</strong>: Muestra todos los mensajes.</p>
<h2 id="html-componentes-de-acción"><span class="header-section-number">8.9</span> HTML: Componentes de acción</h2>
<p><strong>&lt;h:commandButton/&gt;</strong>: Botón: submit, reset o pushbutton.</p>
<p><strong>&lt;h:commandLink/&gt;</strong>: Enlace asociado a un botón pushbutton.</p>
<h2 id="html-componentes-de-selección"><span class="header-section-number">8.10</span> HTML: Componentes de selección</h2>
<p><strong>&lt;h:selecOneListbox/&gt;</strong>: Selección simple para lista desplegable.</p>
<p><strong>&lt;h:selectOneMenu/&gt;</strong>: Selección simple para menu.</p>
<p><strong>&lt;h:selectOneRadio/&gt;</strong>: Conjunto de botones radio.</p>
<p><strong>&lt;h:selectBooleanCheckbox/&gt;</strong>: Checkbox.</p>
<p><strong>&lt;h:selectManyCheckbox/&gt;</strong>: Conjunto de checkboxes.</p>
<p><strong>&lt;h:selectManyListbox/&gt;</strong>: Selección múltiple de lista desplegable.</p>
<p><strong>&lt;h:selectManyMenu/&gt;</strong>: Selección múltiple de menu.</p>
<h2 id="html-componentes-de-agrupación"><span class="header-section-number">8.11</span> HTML: Componentes de agrupación</h2>
<p><strong>&lt;h:head/&gt;</strong>: Cabecera HTML.</p>
<p><strong>&lt;h:body/&gt;</strong>: Cuerpo HTML.</p>
<p><strong>&lt;h:form/&gt;</strong>: Formulario HTML.</p>
<p><strong>&lt;h:panelGrid/&gt;</strong>: Tabla HTML.</p>
<p><strong>&lt;h:panelGroup/&gt;</strong>: Dos o más componentes que son mostrados como uno.</p>
<p><strong>&lt;h:dataTable/&gt;</strong>: Tabla de datos.</p>
<p><strong>&lt;h:column/&gt;</strong>: Columna de un dataTable.</p>
<h1 id="ciclo-de-vida"><span class="header-section-number">9</span> Ciclo de vida</h1>
<h2 id="una-petición"><span class="header-section-number">9.1</span> Una petición</h2>
<p>El ciclo de vida de JSF comienza cuando un usuario hace una <strong>petición HTTP</strong> y termina cuando el servidor le responde con la página correspondiente.</p>
<p>Como HTTP es un protocolo sin estado, no es capaz de &quot;recordar&quot; las transacciones anteriores que se han llevado a cabo entre el usuario y el servidor.</p>
<p>JSF soluciona esta &quot;falta de memoria&quot; manteniendo <strong>vistas en el lado del servidor</strong>.</p>
<p>Una vista es un árbol de componentes que representa la UI del usuario.</p>
<h2 id="esquema"><span class="header-section-number">9.2</span> Esquema</h2>
<div style="text-align:center">
<img src="../img/jsf-life-cycle.png" alt="Ciclo de vida" />
</div>
<h2 id="restore-view"><span class="header-section-number">9.3</span> Restore View</h2>
<p>Se crea o restaura el <strong>árbol de componentes</strong> (la vista) en memoria.</p>
<p>Cuando la vista se crea por primera vez, se almacena en un contenedor padre conocido como FacesContext, y se pasa directamente a la última fase (Render Response), ya que la petición no tendrá valores que estudiar.</p>
<p>Todas las operaciones realizadas en el FacesContext utilizan un hilo por petición de usuario, así que no hay que preocuparse porque múltiples peticiones de usuarios puedan &quot;liarla&quot;.</p>
<h2 id="apply-request-values"><span class="header-section-number">9.4</span> Apply Request Values</h2>
<p>Se itera sobre los componentes del árbol, comprobando qué valor de la petición pertenece a qué componente, y los van guardando.</p>
<p>Aquí es donde se hace la <strong>conversión de datos de texto a objetos</strong>.</p>
<p>Estos valores almacenados se llaman &quot;valores locales&quot;.</p>
<h2 id="process-validations"><span class="header-section-number">9.5</span> Process Validations</h2>
<p>Se realizan las <strong>validaciones</strong> necesarias de los &quot;valores locales&quot;.</p>
<p>Si ocurre algún error en esta fase, se pasa a la fase Render Response, mostrándole al usuario otra vez la página actual con los errores ocurridos, dándole así una nueva oportunidad para que pueda introducir los datos correctos.</p>
<p>Si añadimos a un botón o a un link el atributo immediate=true, se saltará la fase de validación.</p>
<h2 id="update-model-values"><span class="header-section-number">9.6</span> Update Model Values</h2>
<p>Se modifican los <strong>valores de los Managed Beans asociados</strong> a los componentes de la vista con los &quot;valores locales&quot; (Ej. #{userBean.name})</p>
<p>En esta fase es donde se hace la conversión de valores.</p>
<h2 id="invoke-application"><span class="header-section-number">9.7</span> Invoke Application</h2>
<p>Se invoca el <strong>método asociado al action del botón o del link</strong> que pinchó el usuario (Ej. #{userBean.addUser}), y que hizo que se activara el ciclo de vida de la petición.</p>
<p>Estos métodos devuelven un String que le indica al gestor de navegación qué página tiene que devolverle al usuario.</p>
<h2 id="render-response"><span class="header-section-number">9.8</span> Render Response</h2>
<p>El servidor devuelve la página de <strong>respuesta al navegador</strong> del usuario y guarda el estado actual de la vista para poder restaurarla en una petición posterior.</p>
<p>Aquí es donde se hace la <strong>conversión de datos de objetos a textos</strong>.</p>
<h1 id="convertidores"><span class="header-section-number">10</span> Convertidores</h1>
<h2 id="descripción"><span class="header-section-number">10.1</span> Descripción</h2>
<p><strong>Convierte texto en un objeto y viceversa</strong>.</p>
<p>Si hay un problema de formato lanza un excepción.</p>
<p>Existen convertidores estándar pero también se pueden personalizar.</p>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;h:outputText</span><span class="ot"> value=</span><span class="st">&quot;#{myBean.date}&quot;</span><span class="ot"> converter=</span><span class="st">&quot;myConverter&quot;</span><span class="kw">&gt;</span></code></pre>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;h:outputText</span><span class="ot"> value=</span><span class="st">&quot;#{myBean.date}&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;f:converter</span><span class="ot"> converterId=</span><span class="st">&quot;myConverter&quot;</span><span class="kw">/&gt;</span>
<span class="kw">&lt;/h:outputText&gt;</span></code></pre>
<h2 id="convertidores-estándar"><span class="header-section-number">10.2</span> Convertidores estándar</h2>
<p>Si no se especifica un convertidor, JSF escoge uno por defecto.</p>
<p>Exsisten para todos los <strong>tipos básicos</strong>: Long, Byte, Integer, Short, Character, Double, Float, BigDecimal, BigInteger y Boolean.</p>
<p>Existen además convertidores predefinidos para fechas y números.</p>
<h2 id="convertidor-datetime"><span class="header-section-number">10.3</span> Convertidor DateTime</h2>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;h:outputText</span><span class="ot"> value=</span><span class="st">&quot;#{myBean.date}&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;f:convertDateTime</span><span class="ot"> type=</span><span class="st">&quot;date&quot;</span><span class="ot"> dateStyle=</span><span class="st">&quot;medium&quot;</span><span class="kw">/&gt;</span>
<span class="kw">&lt;/h:outputText&gt;</span></code></pre>
<p>Atributos:</p>
<ul>
<li><p><strong>dateStyle</strong>: formato short, medium (por defecto), long y full, para la fecha.</p></li>
<li><p><strong>timeStyle</strong>: formato short, medium (por defecto), long y full, para las horas, minutos y segudos.</p></li>
<li><p><strong>timezone</strong>: zona horaria para la fecha.</p></li>
<li><p><strong>locale</strong>: el idioma local a utilizar para la visualización de esta fecha.</p></li>
<li><p><strong>pattern</strong>: permite utilizar un formato personalizado.</p></li>
<li><p><strong>type</strong>: especifica si se debe mostrar la fecha (date), la hora (time) o ambas (both).</p></li>
</ul>
<h2 id="convertidor-de-número"><span class="header-section-number">10.4</span> Convertidor de Número</h2>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;h:outputText</span><span class="ot"> value=</span><span class="st">&quot;#{myBean.number}&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;f:convertNumber</span><span class="ot"> type=</span><span class="st">&quot;number&quot;</span><span class="ot"> minFractionDigits=</span><span class="st">&quot;2&quot;</span><span class="ot"> maxFractionDigits=</span><span class="st">&quot;2&quot;</span><span class="kw">/&gt;</span>
<span class="kw">&lt;/h:outputText&gt;</span></code></pre>
<p>Atributos:</p>
<ul>
<li><p><strong>groupingUsed</strong>: si true (por defecto) mostrará separador de miles.</p></li>
<li><p><strong>integerOnly</strong>: si true solo se procesa la parte entera ignorando decimales. Por defecto es false.</p></li>
<li><p><strong>locale</strong>: el idioma local a utilizar para la visualización de este número.</p></li>
<li><p><strong>minFractionDigits</strong>: cantidad mínima de decimales a mostrar.</p></li>
<li><p><strong>maxFractionDigits</strong>: máximo número de decimales a mostrar.</p></li>
<li><p><strong>minIntegerDigits</strong>: cantidad mínima de dígitos enteros a mostrar.</p></li>
<li><p><strong>maxIntegerDigits</strong>: máximo número de dígitos enteros a mostrar.</p></li>
<li><p><strong>pattern</strong>: permite utilizar un formato personalizado.</p></li>
<li><p><strong>tipo</strong>: indica si es un número (number, por defecto), una moneda (currency), o un tanto por ciento (percent).</p></li>
</ul>
<h2 id="convertidor-de-moneda"><span class="header-section-number">10.5</span> Convertidor de Moneda</h2>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;h:outputText</span><span class="ot"> value=</span><span class="st">&quot;#{myBean.currency}&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;f:convertNumber</span><span class="ot"> type=</span><span class="st">&quot;currency&quot;</span><span class="ot"> currencyCode=</span><span class="st">&quot;USD&quot;</span><span class="ot"> currencySymbol=</span><span class="st">&quot;$&quot;</span><span class="kw">/&gt;</span>
<span class="kw">&lt;/h:outputText&gt;</span></code></pre>
<p>Atributos (además de los ya mencionados para números):</p>
<ul>
<li><p><strong>currencyCode</strong>: código internacional de la moneda.</p></li>
<li><p><strong>currencySymbol</strong>: símbolo de la moneda..</p></li>
</ul>
<h2 id="convertidores-personalizados"><span class="header-section-number">10.6</span> Convertidores personalizados</h2>
<p>A veces, los convertidores estándar no son suficientes.</p>
<p>Implementar la interfaz <strong>javax.faces.Converter</strong>.</p>
<p>Durante el Apply Request Values, JSF utiliza <strong>getAsObject()</strong> para convertir la cadena de entrada al modelo de objetos de datos.</p>
<p>Durante Render Response, JSF utiliza <strong>getAsString()</strong> para hacer la conversión en la dirección opuesta.</p>
<h2 id="registrar-el-convertidor"><span class="header-section-number">10.7</span> Registrar el convertidor</h2>
<p>Una vez finalizado el conversor, tiene que <strong>registrarse en faces-config.xml</strong> <strong>o usando la notación <span class="citation" data-cites="FacesConverter">@FacesConverter</span></strong>.</p>
<pre class="sourceCode java"><code class="sourceCode java"><span class="fu">@FacesConverter</span>(value=<span class="st">&quot;PhoneNumberConverter&quot;</span>)
<span class="kw">public</span> <span class="kw">class</span> PhoneNumberConverter <span class="kw">implements</span> Converter {
  ...
}</code></pre>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;converter&gt;</span>
  <span class="kw">&lt;converter-id&gt;</span>PhoneNumberConverter<span class="kw">&lt;/converter-id&gt;</span>
  <span class="kw">&lt;converter-class&gt;</span>package.PhoneNumberConverter<span class="kw">&lt;/converter-class&gt;</span>
<span class="kw">&lt;/converter&gt;</span></code></pre>
<h2 id="ejemplo"><span class="header-section-number">10.8</span> Ejemplo</h2>
<pre class="sourceCode java"><code class="sourceCode java"><span class="fu">@FacesConverter</span>(value=<span class="st">&quot;PhoneNumberConverter&quot;</span>)
<span class="kw">public</span> <span class="kw">class</span> PhoneNumberConverter <span class="kw">implements</span> Converter {

  <span class="kw">public</span> Object <span class="fu">getAsObject</span>(
    FacesContext context, UIComponent component, String value) {

    Integer result = <span class="kw">null</span>;
    <span class="co">// parseamos value</span>
    ...
    <span class="kw">return</span> result;
  }

  <span class="kw">public</span> String <span class="fu">getAsString</span>(
    FacesContext context, UIComponent component, String value)
      <span class="kw">throws</span> ConverterException {

    String result = <span class="kw">null</span>;
    <span class="co">// parseamos value</span>
    ...
    <span class="kw">return</span> result;
  }
}</code></pre>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;h:inputText</span><span class="ot"> value=</span><span class="st">&quot;#{usuario.phoneNumber}&quot;</span><span class="ot"> converter=</span><span class="st">&quot;PhoneNumberConverter&quot;</span> <span class="kw">/&gt;</span></code></pre>
<h2 id="convertidores-automáticos"><span class="header-section-number">10.9</span> Convertidores automáticos</h2>
<p>Podemos hacer que JSF automáticamente convierta tipos de datos con su convertidor correspondiente, de tal forma que no tengamos que utilizarlo en los taglibs.</p>
<p>Para ello:</p>
<pre class="sourceCode java"><code class="sourceCode java"><span class="fu">@FacesConverter</span>(forClass=<span class="st">&quot;PhoneNumber.class&quot;</span>)
<span class="kw">public</span> <span class="kw">class</span> PhoneNumberConverter <span class="kw">implements</span> Converter {
  ...
}</code></pre>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;converter&gt;</span>
  <span class="kw">&lt;converter-id&gt;</span>PhoneNumberConverter<span class="kw">&lt;/converter-id&gt;</span>
  <span class="kw">&lt;converter-class&gt;</span>package.PhoneNumberConverter<span class="kw">&lt;/converter-class&gt;</span>
  <span class="kw">&lt;converter-for-class&gt;</span>package.PhoneNumber<span class="kw">&lt;/converter-forclass&gt;</span>
<span class="kw">&lt;/converter&gt;</span></code></pre>
<h1 id="validadores"><span class="header-section-number">11</span> Validadores</h1>
<h2 id="definición-1"><span class="header-section-number">11.1</span> Definición</h2>
<p>Sirven para <strong>validar los datos</strong> introducidos por el usario.</p>
<p>JSF viene con validadores estándar.</p>
<p>Podemos crearnos validadores personalizados.</p>
<p>Tabién podemos validar a nivel de aplicación.</p>
<h2 id="validadores-estándar"><span class="header-section-number">11.2</span> Validadores estándar</h2>
<p><strong>&lt;f:validateDoubleRange&gt;</strong>: valida que un double esté dentro de un rango determinado.</p>
<p><strong>&lt;f:validateLength&gt;</strong>: valida que la longitud de la cadena esté dentro de un rango determinado.</p>
<p><strong>&lt;f:validateLongRange&gt;</strong>: valida que un long esté dentro de un rango determinado.</p>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;h:inputText</span><span class="ot"> id=</span><span class="st">&quot;quantity&quot;</span><span class="ot"> value=</span><span class="st">&quot;#{item.quantity}&quot;</span><span class="ot"> size=</span><span class="st">&quot;2&quot;</span><span class="ot"> required=</span><span class="st">&quot;true&quot;</span>
<span class="ot">    requiredMessage=</span><span class="st">&quot;Cuantos? Ninguno?&quot;</span>
<span class="ot">    converterMessage=</span><span class="st">&quot;Un entero por favor!&quot;</span>
    validatorMessage=&quot;Mín<span class="er">imo</span><span class="ot"> uno</span><span class="er">!&quot;&gt;</span>
  <span class="er">&lt;f:validateLongRange</span> <span class="er">minimum</span><span class="ot">=</span><span class="st">&quot;1&quot;</span><span class="kw">/&gt;</span>
<span class="er">&lt;</span>/h:inputText&gt;</code></pre>
<h2 id="validadores-personalizados"><span class="header-section-number">11.3</span> Validadores personalizados</h2>
<p>Implementar la interfaz <strong>javax.faces.validator.Validator</strong>.</p>
<p>Durante el Process Validations, JSF utiliza <strong>validate()</strong> para validar los datos introducidos.</p>
<p>Una vez finalizado el conversor, tiene que <strong>registrarse en faces-config.xml</strong> <strong>o usando la notación <span class="citation" data-cites="FacesValidator">@FacesValidator</span></strong>.</p>
<pre class="sourceCode java"><code class="sourceCode java"><span class="fu">@FacesValidator</span>(<span class="st">&quot;NifValidator&quot;</span>)
<span class="kw">public</span> <span class="kw">class</span> NifValidator <span class="kw">implements</span> Validator {
  ...
&lt;!--}--&gt;</code></pre>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;validator&gt;</span>
  <span class="kw">&lt;validator-id&gt;</span>NifValidator<span class="kw">&lt;/validator-id&gt;</span>
  <span class="kw">&lt;validator-class&gt;</span>package.NifValidator<span class="kw">&lt;/validator-class&gt;</span>
<span class="kw">&lt;/validator&gt;</span></code></pre>
<h2 id="ejemplo-1"><span class="header-section-number">11.4</span> Ejemplo</h2>
<p>Validador que valida la letra del nif:</p>
<pre class="sourceCode java"><code class="sourceCode java"><span class="fu">@FacesValidator</span>(<span class="st">&quot;NifValidator&quot;</span>)
<span class="kw">public</span> <span class="kw">class</span> NifValidator <span class="kw">implements</span> Validator {

  <span class="kw">public</span> <span class="dt">void</span> <span class="fu">validate</span>(
    FacesContext context, UIComponent component, Object value) {

    String errorMessage = <span class="kw">null</span>;
    <span class="co">// validate value and put errorMessage</span>
    ...
    <span class="kw">if</span> (message != <span class="kw">null</span>) {

      FacesMessage message = <span class="kw">new</span> <span class="fu">FacesMessage</span>(
       FacesMessage.<span class="fu">SEVERITY_ERROR</span>, errorMessage, errorMessage);
      <span class="kw">throw</span> <span class="kw">new</span> <span class="fu">ValidatorException</span>(message);
    }
  }
}</code></pre>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;h:inputText</span><span class="ot"> id=</span><span class="st">&quot;nif&quot;</span><span class="ot"> value=</span><span class="st">&quot;#{usuario.nif}&quot;</span>
<span class="ot">    rendered=</span><span class="st">&quot;true&quot;</span>
<span class="ot">    requiredMessage=</span><span class="st">&quot;No puede estar vacio&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;f:validator</span><span class="ot"> validatorId=</span><span class="st">&quot;NifValidator&quot;</span> <span class="kw">/&gt;</span>
<span class="kw">&lt;/h:inputText&gt;</span>
<span class="kw">&lt;h:message</span><span class="ot"> for=</span><span class="st">&quot;nif&quot;</span><span class="ot"> errorClass=</span><span class="st">&quot;error&quot;</span> <span class="kw">/&gt;</span></code></pre>
<h2 id="validador-en-managed-bean"><span class="header-section-number">11.5</span> Validador en Managed Bean</h2>
<p>En lugar de crear una nueva clase como se describe en la sección anterior, podemos agregar un <strong>método a un Managed Bean</strong>.</p>
<pre class="sourceCode java"><code class="sourceCode java"><span class="kw">public</span> <span class="kw">class</span> Usuario {
  ...
  <span class="kw">public</span> <span class="dt">void</span> <span class="fu">validateNif</span>(
    FacesContext context, UIComponent component, Object value) {

    String errorMessage = <span class="kw">null</span>;
    <span class="co">// validate value and put errorMessage</span>
    ...
    <span class="kw">if</span> (errorMessage != <span class="kw">null</span>) {
      ((UIInput)component).<span class="fu">setValid</span>(<span class="kw">false</span>);
      FacesMessage message = <span class="kw">new</span> <span class="fu">FacesMessage</span>(errorMessage);
      context.<span class="fu">addMessage</span>(component.<span class="fu">getClientId</span>(context), message);
    }
  }
}</code></pre>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;h:inputText</span><span class="ot"> id=</span><span class="st">&quot;nif&quot;</span><span class="ot"> value=</span><span class="st">&quot;#{Usuario.nif}&quot;</span>
<span class="ot">    rendered=</span><span class="st">&quot;true&quot;</span>
<span class="ot">    requiredMessage=</span><span class="st">&quot;No puede estar vacio&quot;</span>
<span class="ot">    validator=</span><span class="st">&quot;#{usuario.validateNif}&quot;</span><span class="kw">&gt;</span>
<span class="kw">&lt;/h:inputText&gt;</span>
<span class="kw">&lt;h:message</span><span class="ot"> for=</span><span class="st">&quot;ccexpiry&quot;</span><span class="ot"> errorClass=</span><span class="st">&quot;error&quot;</span> <span class="kw">/&gt;</span></code></pre>
<h2 id="validación-a-nivel-de-aplicación"><span class="header-section-number">11.6</span> Validación a nivel de aplicación</h2>
<p>Cuando queremos por ejemplo que un determinado registro exsista en la BD.</p>
<p>Se hace en la llamada al método del Managed Bean, y si hay un error se muestra:</p>
<pre class="sourceCode java"><code class="sourceCode java">FacesContext context = FacesContext.<span class="fu">getCurrentInstance</span>();
FacesMessage message = <span class="kw">new</span> <span class="fu">FacesMessage</span>();
message.<span class="fu">setSeverity</span>(FacesMessage.<span class="fu">SEVERITY_ERROR</span>);
message.<span class="fu">setSummary</span>(<span class="st">&quot;Este es el mensaje de error principal&quot;</span>);
message.<span class="fu">setDetail</span>(<span class="st">&quot;Este es el detalle&quot;</span>);
context.<span class="fu">addMessage</span>(<span class="kw">null</span>, message);</code></pre>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;h:messages</span><span class="ot"> globalOnly=</span><span class="st">&quot;true&quot;</span><span class="ot"> styleClass=</span><span class="st">&quot;error&quot;</span><span class="kw">/&gt;</span></code></pre>
<h1 id="message-bundles"><span class="header-section-number">12</span> Message Bundles</h1>
<h2 id="definición-2"><span class="header-section-number">12.1</span> Definición</h2>
<p>Los Message Bundles son ficheros <strong>.properties</strong> que guardan <strong>mensajes del tipo clave=valor</strong>.</p>
<p>Nos ayuda con la <strong>internacionalización</strong> de la aplicación.</p>
<h2 id="creación"><span class="header-section-number">12.2</span> Creación</h2>
<p><strong>messages.properties</strong> en <strong>src/java/com/examples</strong></p>
<pre><code>name=Tu nombre:
age=Tu edad:</code></pre>
<h2 id="instanciación"><span class="header-section-number">12.3</span> Instanciación</h2>
<p>Lo podemos instanciar en cada página JSF donde lo necesitemos.</p>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;f:loadBundle</span><span class="ot"> basename=</span><span class="st">&quot;com.examples.messages&quot;</span><span class="ot"> var=</span><span class="st">&quot;msg&quot;</span><span class="kw">/&gt;</span></code></pre>
<p>O de manera global en faces-config.xml</p>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;application&gt;</span>
  <span class="kw">&lt;resource-bundle&gt;</span>
    <span class="kw">&lt;base-name&gt;</span>com.examples.messages<span class="kw">&lt;/base-name&gt;</span>
    <span class="kw">&lt;var&gt;</span>msg<span class="kw">&lt;/var&gt;</span>
  <span class="kw">&lt;/resource-bundle&gt;</span>
<span class="kw">&lt;/application&gt;</span></code></pre>
<p>Para acceder:</p>
<pre class="sourceCode xml"><code class="sourceCode xml">#{msg.propertyName}</code></pre>
<h2 id="paremetrización"><span class="header-section-number">12.4</span> Paremetrización</h2>
<pre class="sourceCode xml"><code class="sourceCode xml">hello=Bienvenido {0} a nuestra web</code></pre>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;h:outputFormat</span><span class="ot"> value=</span><span class="st">&quot;#{msg.hello}&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;f:param</span><span class="ot"> value=</span><span class="st">&quot;#{userBean.name}&quot;</span><span class="kw">/&gt;</span>
<span class="kw">&lt;/h:outputFormat&gt;</span></code></pre>
<h2 id="internacionalización"><span class="header-section-number">12.5</span> Internacionalización</h2>
<p>Crear un nuevo <strong>.properties</strong> anadiendo un guión bajo y el código ISO-639 del idioma:</p>
<pre><code>messages_en.properties</code></pre>
<p>Java se encarga de hacer referencia al fichero adecuado según el idioma.</p>
<p>Si no se carga ninguno, coge el de por defecto, que en nuestro ejemplo sería messages.properties.</p>
<h2 id="definir-el-idioma"><span class="header-section-number">12.6</span> Definir el idioma</h2>
<p>De manera global en el fichero faces-config.xml:</p>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;application&gt;</span>
  <span class="kw">&lt;locale-config&gt;</span>
    <span class="kw">&lt;default-locale&gt;</span>es<span class="kw">&lt;/default-locale&gt;</span>
    <span class="kw">&lt;supported-locale&gt;</span>en<span class="kw">&lt;/supported-locale&gt;</span>
  <span class="kw">&lt;/locale-config&gt;</span>
<span class="kw">&lt;/application&gt;</span></code></pre>
<p>De manera local y estática en una página JSF:</p>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;f:view</span><span class="ot"> locale=</span><span class="st">&quot;en&quot;</span><span class="kw">&gt;</span></code></pre>
<p>De manera local y dinámica (por ejemplo, para cuando dejemos que el usuario seleccione el idioma)</p>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;f:view</span><span class="ot"> locale=</span><span class="st">&quot;#{userBean.locale}&quot;</span><span class="kw">/&gt;</span></code></pre>
<p>De manera local en una clase Java</p>
<pre class="sourceCode java"><code class="sourceCode java">FacesContext.<span class="fu">getCurrentInstance</span>().<span class="fu">getViewRoot</span>().<span class="fu">setLocale</span>(<span class="kw">new</span> Locale(<span class="st">&quot;es&quot;</span>));</code></pre>
<h1 id="facelets"><span class="header-section-number">13</span> Facelets</h1>
<h2 id="esquema-1"><span class="header-section-number">13.1</span> Esquema</h2>
<div style="text-align:center">
<img src="../img/jsf-facelets.png" alt="Facelets" />
</div>
<h2 id="opciones-web.xml"><span class="header-section-number">13.2</span> Opciones web.xml</h2>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="co">&lt;!-- Indicar que el sufijo por defecto (no necesario con MyFaces) --&gt;</span>
<span class="kw">&lt;context-param&gt;</span>
  <span class="kw">&lt;param-name&gt;</span>javax.faces.DEFAULT_SUFFIX<span class="kw">&lt;/param-name&gt;</span>
  <span class="kw">&lt;param-value&gt;</span>.xhtml<span class="kw">&lt;/param-value&gt;</span>
<span class="kw">&lt;/context-param&gt;</span>

<span class="co">&lt;!-- Indicar que estamos en desarrollo (más informativo en los logs) --&gt;</span>
<span class="kw">&lt;context-param&gt;</span>
  <span class="kw">&lt;param-name&gt;</span>facelets.DEVELOPMENT<span class="kw">&lt;/param-name&gt;</span>
  <span class="kw">&lt;param-value&gt;</span>true<span class="kw">&lt;/param-value&gt;</span>
<span class="kw">&lt;/context-param&gt;</span>

<span class="co">&lt;!-- No renderizar los comentarios --&gt;</span>
<span class="kw">&lt;context-param&gt;</span>
  <span class="kw">&lt;param-name&gt;</span>javax.faces.FACELETS_SKIP_COMMENTS<span class="kw">&lt;/param-name&gt;</span>
  <span class="kw">&lt;param-value&gt;</span>true<span class="kw">&lt;/param-value&gt;</span>
<span class="kw">&lt;/context-param&gt;</span></code></pre>
<h2 id="configuración-faces-config.xml"><span class="header-section-number">13.3</span> Configuración faces-config.xml</h2>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="co">&lt;!-- Indicar que vamos a utilizar Facelets (no necesario con MyFaces) --&gt;</span>
<span class="kw">&lt;application&gt;</span>
  <span class="kw">&lt;view-handler&gt;</span>com.sun.facelets.FaceletViewHandler<span class="kw">&lt;/view-handler&gt;</span>
<span class="kw">&lt;/application&gt;</span></code></pre>
<h2 id="tags"><span class="header-section-number">13.4</span> Tags</h2>
<p><strong>&lt;ui:insert&gt;</strong>: definición a remplazar en un componente mediante la etiqueta &lt;ui:define&gt;.</p>
<p><strong>&lt;ui:param&gt;</strong>: para pasar parámetros desde las plantillas a los componentes.</p>
<p><strong>&lt;ui:composition&gt;</strong>: envuelve un conjunto de componentes que utilizan una plantilla. Todo lo que no esté dentro no se rederizará.</p>
<p><strong>&lt;ui:define&gt;</strong>: contenido que remplaza lo definido en un &lt;ui:insert&gt;.</p>
<p><strong>&lt;ui:decorate&gt;</strong>: igual que la etiqueta &lt;ui:composition&gt; sólo que ahora se renderiza todo.</p>
<p><strong>&lt;ui:include&gt;</strong>: sirve para incluir en una página el contenido de otra.</p>
<h2 id="definición-de-la-plantilla"><span class="header-section-number">13.5</span> Definición de la Plantilla</h2>
<p>Dentro del directorio <strong>WEB-INF/facelets/templates/</strong>, de modo que no sean visibles desde el contenedor web.</p>
<p>defaultLayout.xhtml</p>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;?xml</span> version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;<span class="kw">?&gt;</span>
<span class="dt">&lt;!DOCTYPE </span>html<span class="dt">&gt;</span>
<span class="kw">&lt;html</span><span class="ot"> xmlns=</span><span class="st">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="ot"> xmlns:ui=</span><span class="st">&quot;http://java.sun.com/jsf/facelets&quot;</span>
<span class="ot">  xmlns:f=</span><span class="st">&quot;http://java.sun.com/jsf/core&quot;</span><span class="ot"> xmlns:h=</span><span class="st">&quot;http://java.sun.com/jsf/html&quot;</span><span class="kw">&gt;</span>

<span class="kw">&lt;h:head&gt;</span> ... <span class="kw">&lt;title&gt;&lt;ui:insert</span><span class="ot"> name=</span><span class="st">&quot;title&quot;</span><span class="kw">/&gt;</span> ... <span class="kw">&lt;/title&gt;</span> ... <span class="kw">&lt;/h:head&gt;</span>

<span class="kw">&lt;h:body&gt;</span>
  <span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;header&quot;</span><span class="kw">&gt;</span> ... <span class="kw">&lt;/div&gt;</span>
  <span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;menu&quot;</span><span class="kw">&gt;&lt;ui:include</span><span class="ot"> src=</span><span class="st">&quot;menu.xhtml&quot;</span><span class="kw">/&gt;&lt;/div&gt;</span>
  <span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;content&quot;</span><span class="kw">&gt;</span>
    <span class="kw">&lt;ui:insert</span><span class="ot"> name=</span><span class="st">&quot;content&quot;</span><span class="kw">&gt;</span>
      <span class="kw">&lt;span&gt;</span>Texto por defecto<span class="kw">&lt;/span&gt;</span>
    <span class="kw">&lt;/ui:insert&gt;</span>
  <span class="kw">&lt;/div&gt;</span>
  <span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;footer&quot;</span><span class="kw">&gt;</span> ... <span class="kw">&lt;/div&gt;</span>
<span class="kw">&lt;/h:body&gt;</span>
<span class="kw">&lt;/html&gt;</span></code></pre>
<h2 id="inclusión-del-menú"><span class="header-section-number">13.6</span> Inclusión del Menú</h2>
<p>menu.xhtml</p>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;?xml</span> version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;<span class="kw">?&gt;</span>
<span class="dt">&lt;!DOCTYPE </span>html<span class="dt">&gt;</span>
<span class="kw">&lt;html</span><span class="ot"> xmlns=</span><span class="st">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="ot"> xmlns:ui=</span><span class="st">&quot;http://java.sun.com/jsf/facelets&quot;</span>
<span class="ot">  xmlns:f=</span><span class="st">&quot;http://java.sun.com/jsf/core&quot;</span><span class="ot"> xmlns:h=</span><span class="st">&quot;http://java.sun.com/jsf/html&quot;</span>
<span class="ot">  xmlns:p=</span><span class="st">&quot;http://primefaces.prime.com.tr/ui&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;ui:composition&gt;</span>
    <span class="kw">&lt;p:menubar&gt;</span>
      <span class="kw">&lt;p:submenu</span><span class="ot"> label=</span><span class="st">&quot;#{msg.menu_home}&quot;</span><span class="kw">&gt;</span>
        <span class="kw">&lt;p:menuitem</span><span class="ot"> label=</span><span class="st">&quot;Home&quot;</span><span class="ot"> url=</span><span class="st">&quot;#&quot;</span> <span class="kw">/&gt;</span>
      <span class="kw">&lt;/p:submenu&gt;</span>
      <span class="kw">&lt;p:submenu</span><span class="ot"> label=</span><span class="st">&quot;#{msg.menu_items}&quot;</span><span class="kw">&gt;</span>
        <span class="kw">&lt;p:menuitem</span><span class="ot"> label=</span><span class="st">&quot;#{msg.new}&quot;</span><span class="ot"> url=</span><span class="st">&quot;#{menuBean.createItem}&quot;</span><span class="kw">&gt;&lt;/p:menuitem&gt;</span>
        <span class="kw">&lt;p:menuitem</span><span class="ot"> label=</span><span class="st">&quot;#{msg.list}&quot;</span><span class="ot"> url=</span><span class="st">&quot;#{menuBean.listItem}&quot;</span><span class="kw">&gt;&lt;/p:menuitem&gt;</span>
      <span class="kw">&lt;/p:submenu&gt;</span>
    <span class="kw">&lt;/p:menubar&gt;</span>
  <span class="kw">&lt;/ui:composition&gt;</span>
<span class="kw">&lt;/html&gt;</span></code></pre>
<h2 id="uso-de-la-plantilla"><span class="header-section-number">13.7</span> Uso de la Plantilla</h2>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;?xml</span> version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;<span class="kw">?&gt;</span>
<span class="dt">&lt;!DOCTYPE </span>html<span class="dt">&gt;</span>

<span class="kw">&lt;html</span><span class="ot"> xmlns=</span><span class="st">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="ot"> xmlns:ui=</span><span class="st">&quot;http://java.sun.com/jsf/facelets&quot;</span>
<span class="ot">    xmlns:f=</span><span class="st">&quot;http://java.sun.com/jsf/core&quot;</span><span class="ot"> xmlns:h=</span><span class="st">&quot;http://java.sun.com/jsf/html&quot;</span><span class="kw">&gt;</span>

<span class="kw">&lt;ui:composition</span><span class="ot"> template=</span><span class="st">&quot;/WEB-INF/facelets/templates/defaultLayout.xhtml&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;ui:define</span><span class="ot"> name=</span><span class="st">&quot;title&quot;</span><span class="kw">&gt;</span>
    <span class="kw">&lt;h:outputText</span><span class="ot"> value=</span><span class="st">&quot;#{msg.edit_of} #{msg.menu_items}&quot;</span> <span class="kw">/&gt;</span>
  <span class="kw">&lt;/ui:define&gt;</span>
  <span class="kw">&lt;ui:define</span><span class="ot"> name=</span><span class="st">&quot;content&quot;</span><span class="kw">&gt;</span>
    <span class="kw">&lt;h:form&gt;</span>
      <span class="co">&lt;!-- contenido de la página--&gt;</span>
    <span class="kw">&lt;/h:form&gt;</span>
  <span class="kw">&lt;/ui:define&gt;</span>
<span class="kw">&lt;/ui:composition&gt;</span>
<span class="kw">&lt;/html&gt;</span></code></pre>
<h1 id="composite-components"><span class="header-section-number">14</span> Composite Components</h1>
<h2 id="introducción-1"><span class="header-section-number">14.1</span> Introducción</h2>
<p>Con JSF 2.0 podemos crear <strong>componentes personalizados</strong>, a partir de componentes ya existentes, de una forma sencilla.</p>
<h2 id="ejemplo-2"><span class="header-section-number">14.2</span> Ejemplo</h2>
<p>webapp/resources/components/buttons.xhtml</p>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;?xml</span> version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;<span class="kw">?&gt;</span>
<span class="dt">&lt;!DOCTYPE </span>html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; 
&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;<span class="dt">&gt;</span>
<span class="kw">&lt;html</span><span class="ot"> xmlns=</span><span class="st">&quot;http://www.w3.org/1999/xhtml&quot;</span>
<span class="ot">      xmlns:h=</span><span class="st">&quot;http://java.sun.com/jsf/html&quot;</span>
<span class="ot">      xmlns:f=</span><span class="st">&quot;http://java.sun.com/jsf/core&quot;</span>
<span class="ot">      xmlns:composite=</span><span class="st">&quot;http://java.sun.com/jsf/composite&quot;</span><span class="kw">&gt;</span>

  <span class="kw">&lt;composite:interface&gt;</span>
    <span class="kw">&lt;composite:attribute</span><span class="ot"> name=</span><span class="st">&quot;actionLabel&quot;</span> <span class="kw">/&gt;</span>
    <span class="kw">&lt;composite:attribute</span><span class="ot"> name=</span><span class="st">&quot;actionMethod&quot;</span>
<span class="ot">      method-signature=</span><span class="st">&quot;java.lang.String action()&quot;</span> <span class="kw">/&gt;</span>
    <span class="kw">&lt;composite:attribute</span><span class="ot"> name=</span><span class="st">&quot;resetLabel&quot;</span> <span class="kw">/&gt;</span>
  <span class="kw">&lt;/composite:interface&gt;</span>

  <span class="kw">&lt;composite:implementation&gt;</span>
    <span class="kw">&lt;h:commandButton</span><span class="ot"> value=</span><span class="st">&quot;#{cc.attrs.actionLabel}&quot;</span>
<span class="ot">      action=</span><span class="st">&quot;#{cc.attrs.actionMethod}&quot;</span> <span class="kw">/&gt;</span>
    <span class="kw">&lt;h:commandButton</span><span class="ot"> value=</span><span class="st">&quot;#{cc.attrs.resetLabel}&quot;</span>
<span class="ot">      type=</span><span class="st">&quot;reset&quot;</span> <span class="kw">/&gt;</span>
  <span class="kw">&lt;/composite:implementation&gt;</span>

<span class="kw">&lt;/html&gt;</span></code></pre>
<h2 id="uso"><span class="header-section-number">14.3</span> Uso</h2>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;?xml</span> version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;<span class="kw">?&gt;</span>
<span class="dt">&lt;!DOCTYPE </span>html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;
        &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;<span class="dt">&gt;</span>
<span class="kw">&lt;html</span><span class="ot"> xmlns=</span><span class="st">&quot;http://www.w3.org/1999/xhtml&quot;</span>
<span class="ot">      xmlns:h=</span><span class="st">&quot;http://java.sun.com/jsf/html&quot;</span>
<span class="ot">      xmlns:f=</span><span class="st">&quot;http://java.sun.com/jsf/core&quot;</span>
<span class="ot">      xmlns:my=</span><span class="st">&quot;http://java.sun.com/jsf/composite/components&quot;</span><span class="kw">&gt;</span>
<span class="kw">&lt;h:body&gt;</span>
  <span class="kw">&lt;h:form</span><span class="ot"> id=</span><span class="st">&quot;mainForm&quot;</span> <span class="kw">&gt;</span>
    <span class="kw">&lt;h:panelGrid</span><span class="ot"> columns=</span><span class="st">&quot;2&quot;</span><span class="kw">&gt;</span>
      <span class="kw">&lt;my:buttons</span><span class="ot"> actionLabel=</span><span class="st">&quot;Press me&quot;</span> 
<span class="ot">        actionMethod=</span><span class="st">&quot;#{helloWorld.send}&quot;</span>
<span class="ot">        resetLabel=</span><span class="st">&quot;Reset&quot;</span> <span class="kw">/&gt;</span>
    <span class="kw">&lt;/h:panelGrid&gt;</span>
  <span class="kw">&lt;/h:form&gt;</span>
<span class="kw">&lt;/h:body&gt;</span>
<span class="kw">&lt;/html&gt;</span></code></pre>
<p>Si buttons.xml hubiera estado en webapp/resources/mycomponents/buttons.xml cambiar:</p>
<pre class="sourceCode xml"><code class="sourceCode xml">xmlns:my=&quot;http://java.sun.com/jsf/composite/components&quot;</code></pre>
<p>por:</p>
<pre class="sourceCode xml"><code class="sourceCode xml">xmlns:my=&quot;http://java.sun.com/jsf/composite/mycomponents&quot;</code></pre>
<h1 id="custom-tags"><span class="header-section-number">15</span> Custom Tags</h1>
<h2 id="introducción-2"><span class="header-section-number">15.1</span> Introducción</h2>
<p>Con JSF 2.0 también podemos crear <strong>librerías de etiquetas personanilazadas</strong>, a partir de componentes ya existentes, de una forma sencilla.</p>
<h2 id="ejemplo-3"><span class="header-section-number">15.2</span> Ejemplo</h2>
<p>webapp/WEB-INF/taglibs/buttons.xhtml</p>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;?xml</span> version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;<span class="kw">?&gt;</span>
<span class="dt">&lt;!DOCTYPE </span>html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; 
&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;<span class="dt">&gt;</span>
<span class="kw">&lt;html</span><span class="ot"> xmlns=</span><span class="st">&quot;http://www.w3.org/1999/xhtml&quot;</span>
<span class="ot">      xmlns:h=</span><span class="st">&quot;http://java.sun.com/jsf/html&quot;</span>
<span class="ot">      xmlns:f=</span><span class="st">&quot;http://java.sun.com/jsf/core&quot;</span>
<span class="ot">      xmlns:ui=</span><span class="st">&quot;http://java.sun.com/jsf/facelets&quot;</span><span class="kw">&gt;</span>

  <span class="kw">&lt;h:body&gt;</span>
    <span class="kw">&lt;ui:composition&gt;</span>
      <span class="kw">&lt;h:commandButton</span><span class="ot"> value=</span><span class="st">&quot;#{actionLabel}&quot;</span><span class="ot"> action=</span><span class="st">&quot;#{actionBean[actionMethod]}&quot;</span> <span class="kw">/&gt;</span>
      <span class="kw">&lt;h:commandButton</span><span class="ot"> value=</span><span class="st">&quot;#{resetLabel}&quot;</span><span class="ot"> type=</span><span class="st">&quot;reset&quot;</span> <span class="kw">/&gt;</span>
    <span class="kw">&lt;/ui:composition&gt;</span>
  <span class="kw">&lt;/h:body&gt;</span>

<span class="kw">&lt;/html&gt;</span></code></pre>
<h2 id="configuración"><span class="header-section-number">15.3</span> Configuración</h2>
<p>webapp/WEB-INF/taglibs.xml</p>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;?xml</span> version=&quot;1.0&quot;<span class="kw">?&gt;</span>
<span class="dt">&lt;!DOCTYPE </span>facelet-taglib PUBLIC
  &quot;-//Sun Microsystems, Inc.//DTD Facelet Taglib 1.0//EN&quot;
  &quot;http://java.sun.com/dtd/facelet-taglib_1_0.dtd&quot;<span class="dt">&gt;</span>

<span class="kw">&lt;facelet-taglib&gt;</span>
  <span class="kw">&lt;namespace&gt;</span>http://asanzdiego.com/taglibs<span class="kw">&lt;/namespace&gt;</span>
  <span class="kw">&lt;tag&gt;</span>
    <span class="kw">&lt;tag-name&gt;</span>buttons<span class="kw">&lt;/tag-name&gt;</span>
    <span class="kw">&lt;source&gt;</span>taglibs/buttons.xhtml<span class="kw">&lt;/source&gt;</span>
  <span class="kw">&lt;/tag&gt;</span>
<span class="kw">&lt;/facelet-taglib&gt;</span></code></pre>
<p>webapp/WEB-INF/web.xml</p>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;?xml</span> version=&quot;1.0&quot;<span class="kw">?&gt;</span>
<span class="kw">&lt;web-app</span><span class="ot"> xmlns=</span><span class="st">&quot;http://java.sun.com/xml/ns/javaee&quot;</span>
<span class="ot">         xmlns:xsi=</span><span class="st">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
<span class="ot">         xsi:schemaLocation=</span><span class="st">&quot;http://java.sun.com/xml/ns/javaee</span>
<span class="st">              http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;</span><span class="ot"> version=</span><span class="st">&quot;2.5&quot;</span><span class="kw">&gt;</span>
  ...

  <span class="co">&lt;!-- Load custom tag into JSF web application --&gt;</span>
  <span class="kw">&lt;context-param&gt;</span>
    <span class="kw">&lt;param-name&gt;</span>facelets.LIBRARIES<span class="kw">&lt;/param-name&gt;</span>
    <span class="kw">&lt;param-value&gt;</span>/WEB-INF/taglibs.xml<span class="kw">&lt;/param-value&gt;</span>
  <span class="kw">&lt;/context-param&gt;</span>

<span class="kw">&lt;/web-app&gt;</span></code></pre>
<h2 id="uso-1"><span class="header-section-number">15.4</span> Uso</h2>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;?xml</span> version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;<span class="kw">?&gt;</span>
<span class="dt">&lt;!DOCTYPE </span>html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;
        &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;<span class="dt">&gt;</span>
<span class="kw">&lt;html</span><span class="ot"> xmlns=</span><span class="st">&quot;http://www.w3.org/1999/xhtml&quot;</span>
<span class="ot">      xmlns:h=</span><span class="st">&quot;http://java.sun.com/jsf/html&quot;</span>
<span class="ot">      xmlns:f=</span><span class="st">&quot;http://java.sun.com/jsf/core&quot;</span>
<span class="ot">      xmlns:my=</span><span class="st">&quot;http://asanzdiego.com/taglibs&quot;</span><span class="kw">&gt;</span>
<span class="kw">&lt;h:body&gt;</span>
  <span class="kw">&lt;h:form</span><span class="ot"> id=</span><span class="st">&quot;mainForm&quot;</span> <span class="kw">&gt;</span>
    <span class="kw">&lt;h:panelGrid</span><span class="ot"> columns=</span><span class="st">&quot;2&quot;</span><span class="kw">&gt;</span>
      <span class="kw">&lt;my:buttons</span><span class="ot"> actionLabel=</span><span class="st">&quot;Press me&quot;</span>
<span class="ot">        actionBean=</span><span class="st">&quot;#{helloWorld}&quot;</span>
<span class="ot">        actionMethod=</span><span class="st">&quot;send&quot;</span>
<span class="ot">        resetLabel=</span><span class="st">&quot;Reset&quot;</span> <span class="kw">/&gt;</span>
    <span class="kw">&lt;/h:panelGrid&gt;</span>
  <span class="kw">&lt;/h:form&gt;</span>
<span class="kw">&lt;/h:body&gt;</span>
<span class="kw">&lt;/html&gt;</span></code></pre>
<h2 id="composite-components-vs-custom-tags"><span class="header-section-number">15.5</span> Composite Components VS Custom Tags</h2>
<p>Coposite components, es más sencillo y rápido de programar, pero es menos flexible.</p>
<p>Los composite components, JSF los trata como un componente &quot;todo en uno&quot;.</p>
<p>Mientras que con las librerías personalizadas, cada uno de los componentes utilizados, JSF los trata por separado.</p>
<p>Si necesitamos algo más sofisticado que las librerías personalizadas, ya tenemos que crear componentes, creando su correspondiente clase java y al menos un render. Afortunadamente para el 90% de los casos con composite components o con librerías personalizadas tendremos suficiente.</p>
</body>
</html>
